(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[150],{285:(e,t,a)=>{"use strict";a.d(t,{$:()=>i});var r=a(5155);a(2115);var s=a(9708),n=a(2085),l=a(9434);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function i(e){let{className:t,variant:a,size:n,asChild:i=!1,...d}=e,c=i?s.DX:"button";return(0,r.jsx)(c,{"data-slot":"button",className:(0,l.cn)(o({variant:a,size:n,className:t})),...d})}},1394:(e,t,a)=>{"use strict";a.d(t,{BK:()=>o,eu:()=>l,q5:()=>i});var r=a(5155);a(2115);var s=a(5977),n=a(9434);function l(e){let{className:t,...a}=e;return(0,r.jsx)(s.bL,{"data-slot":"avatar",className:(0,n.cn)("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)(s._V,{"data-slot":"avatar-image",className:(0,n.cn)("aspect-square size-full",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)(s.H4,{"data-slot":"avatar-fallback",className:(0,n.cn)("bg-muted flex size-full items-center justify-center rounded-full",t),...a})}},1654:(e,t,a)=>{"use strict";a.d(t,{BlogProvider:()=>i,U:()=>d});var r=a(5155),s=a(2115),n=a(3464),l=a(9576);let o=(0,s.createContext)(void 0),i=e=>{let{children:t}=e,[a,i]=(0,s.useState)([]),[d,c]=(0,s.useState)(null),[u,m]=(0,s.useState)(!1),[p,v]=(0,s.useState)(null),{user:h}=(0,l.A)(),f=async()=>{try{m(!0),v(null);let e=await n.A.get("https://blog-test-7we3.onrender.com/api/blogs");i(e.data)}catch(a){var e,t;v((null===(t=a.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to fetch blogs")}finally{m(!1)}},g=async e=>{try{m(!0),v(null);let t=await n.A.get("https://blog-test-7we3.onrender.com/api/blogs/".concat(e));c(t.data)}catch(e){var t,a;v((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch blog")}finally{m(!1)}},x=async(e,t,a)=>{try{m(!0),v(null);let r=new FormData;r.append("title",e),r.append("description",t),a&&r.append("image",a);let s={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(null==h?void 0:h.token)}};await n.A.post("https://blog-test-7we3.onrender.com/api/blogs",r,s),await f()}catch(e){var r,s;v((null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.message)||"Failed to create blog")}finally{m(!1)}},b=async(e,t,a,r)=>{try{m(!0),v(null);let s=new FormData;s.append("title",t),s.append("description",a),r&&s.append("image",r);let l={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(null==h?void 0:h.token)}};await n.A.put("https://blog-test-7we3.onrender.com/api/blogs/".concat(e),s,l),await f(),d&&await g(e)}catch(e){var s,l;v((null===(l=e.response)||void 0===l?void 0:null===(s=l.data)||void 0===s?void 0:s.message)||"Failed to update blog")}finally{m(!1)}},y=async e=>{try{m(!0),v(null);let t={headers:{Authorization:"Bearer ".concat(null==h?void 0:h.token)}};await n.A.delete("https://blog-test-7we3.onrender.com/api/blogs/".concat(e),t),i(a.filter(t=>t._id!==e)),d&&d._id===e&&c(null)}catch(e){var t,r;v((null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"Failed to delete blog")}finally{m(!1)}},w=async(e,t)=>{try{m(!0),v(null);let a={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==h?void 0:h.token)}},r=await n.A.post("https://blog-test-7we3.onrender.com/api/blogs/".concat(e,"/comments"),{content:t},a);c(r.data)}catch(e){var a,r;v((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to add comment")}finally{m(!1)}},j=async(e,t,a)=>{try{m(!0),v(null);let r={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==h?void 0:h.token)}},s=await n.A.post("https://blog-test-7we3.onrender.com/api/blogs/".concat(e,"/comments/").concat(t,"/replies"),{content:a},r);c(s.data)}catch(e){var r,s;v((null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.message)||"Failed to add reply")}finally{m(!1)}};return(0,r.jsx)(o.Provider,{value:{blogs:a,currentBlog:d,loading:u,error:p,fetchBlogs:f,fetchBlogById:g,createBlog:x,updateBlog:b,deleteBlog:y,addComment:w,addReply:j},children:t})},d=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("useBlog must be used within a BlogProvider");return e}},2665:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var r=a(5155),s=a(2115),n=a(9576),l=a(1654),o=a(5695),i=a(285),d=a(6695),c=a(8543);a(5716);var u=a(1394),m=a(8539),p=a(9946);let v=(0,p.A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),h=(0,p.A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),f=(0,p.A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);function g(){let{user:e}=(0,n.A)(),{currentBlog:t,loading:a,error:p,fetchBlogById:g,addComment:x,addReply:b}=(0,l.U)(),y=(0,o.useParams)(),w=(0,o.useRouter)(),[j,N]=(0,s.useState)(""),[A,k]=(0,s.useState)(""),[C,S]=(0,s.useState)(null);(0,s.useEffect)(()=>{y.id&&g(y.id)},[y.id]);let _=async e=>{if(e.preventDefault(),j.trim())try{await x(y.id,j),N(""),c.oR.success("Comment added")}catch(e){c.oR.error("Failed to add comment")}},z=e=>e.charAt(0).toUpperCase(),B=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return a?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:"Loading..."}):p?(0,r.jsx)("div",{className:"text-red-500 text-center py-10",children:p}):t?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-16",children:[(0,r.jsx)(c.N9,{position:"top-right",autoClose:3e3}),(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,r.jsxs)(i.$,{variant:"ghost",onClick:()=>{w.back()},className:"mb-6 flex items-center",children:[(0,r.jsx)(v,{className:"mr-2 h-4 w-4"}),"Back to Dashboard"]}),(0,r.jsxs)(d.Zp,{className:"shadow-lg mb-6",children:[(0,r.jsx)("img",{src:t.image,alt:"Blog",className:"w-full h-64 object-cover"}),(0,r.jsxs)(d.Wu,{className:"py-6",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:t.title}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,r.jsxs)(u.eu,{className:"h-8 w-8",children:[(0,r.jsx)(u.BK,{src:t.user.profileImage}),(0,r.jsx)(u.q5,{children:z(t.user.email)})]}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:t.user.email}),(0,r.jsx)("span",{className:"text-sm text-gray-400 ml-auto",children:B(t.createdAt)})]}),(0,r.jsx)("p",{className:"text-gray-700",children:t.description})]})]}),e&&(0,r.jsxs)("form",{onSubmit:_,className:"mb-6",children:[(0,r.jsx)(m.T,{placeholder:"Leave a comment...",value:j,onChange:e=>N(e.target.value),className:"mb-2"}),(0,r.jsxs)(i.$,{type:"submit",disabled:!j.trim(),children:[(0,r.jsx)(h,{className:"w-4 h-4 mr-2"})," Comment"]})]}),(0,r.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[(0,r.jsx)(f,{className:"w-5 h-5 mr-2"}),"Comments"]}),(0,r.jsx)("div",{className:"space-y-6",children:t.comments.map(e=>{var t;return(0,r.jsx)("div",{className:"bg-white p-4 rounded shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-start gap-3 mb-2",children:[(0,r.jsxs)(u.eu,{className:"h-8 w-8",children:[(0,r.jsx)(u.BK,{src:e.user.profileImage}),(0,r.jsx)(u.q5,{children:z(e.user.email)})]}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm text-gray-800",children:e.user.email}),(0,r.jsx)("p",{className:"text-gray-700",children:e.content}),(0,r.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:B(e.createdAt)}),(null===(t=e.replies)||void 0===t?void 0:t.length)>0&&(0,r.jsx)("div",{className:"mt-4 ml-6 space-y-4 border-l pl-4 border-gray-200",children:e.replies.map(e=>(0,r.jsx)("div",{className:"text-sm text-gray-700",children:(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsxs)(u.eu,{className:"h-6 w-6",children:[(0,r.jsx)(u.BK,{src:e.user.profileImage}),(0,r.jsx)(u.q5,{children:z(e.user.email)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.user.email}),(0,r.jsx)("p",{children:e.content}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:B(e.createdAt)})]})]})},e._id))})]})]})},e._id)})})]})]}):(0,r.jsx)("div",{className:"text-center py-10",children:"Blog not found"})}},2712:(e,t,a)=>{"use strict";a.d(t,{N:()=>s});var r=a(2115),s=globalThis?.document?r.useLayoutEffect:()=>{}},3655:(e,t,a)=>{"use strict";a.d(t,{hO:()=>i,sG:()=>o});var r=a(2115),s=a(7650),n=a(9708),l=a(5155),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let a=r.forwardRef((e,a)=>{let{asChild:r,...s}=e,o=r?n.DX:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(o,{...s,ref:a})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function i(e,t){e&&s.flushSync(()=>e.dispatchEvent(t))}},5015:(e,t,a)=>{Promise.resolve().then(a.bind(a,2665))},5977:(e,t,a)=>{"use strict";a.d(t,{H4:()=>w,_V:()=>y,bL:()=>b});var r=a(2115),s=a(6081),n=a(9033),l=a(2712),o=a(3655),i=a(5155),d="Avatar",[c,u]=(0,s.A)(d),[m,p]=c(d),v=r.forwardRef((e,t)=>{let{__scopeAvatar:a,...s}=e,[n,l]=r.useState("idle");return(0,i.jsx)(m,{scope:a,imageLoadingStatus:n,onImageLoadingStatusChange:l,children:(0,i.jsx)(o.sG.span,{...s,ref:t})})});v.displayName=d;var h="AvatarImage",f=r.forwardRef((e,t)=>{let{__scopeAvatar:a,src:s,onLoadingStatusChange:d=()=>{},...c}=e,u=p(h,a),m=function(e,t){let[a,s]=r.useState("idle");return(0,l.N)(()=>{if(!e){s("error");return}let a=!0,r=new window.Image,n=e=>()=>{a&&s(e)};return s("loading"),r.onload=n("loaded"),r.onerror=n("error"),r.src=e,t&&(r.referrerPolicy=t),()=>{a=!1}},[e,t]),a}(s,c.referrerPolicy),v=(0,n.c)(e=>{d(e),u.onImageLoadingStatusChange(e)});return(0,l.N)(()=>{"idle"!==m&&v(m)},[m,v]),"loaded"===m?(0,i.jsx)(o.sG.img,{...c,ref:t,src:s}):null});f.displayName=h;var g="AvatarFallback",x=r.forwardRef((e,t)=>{let{__scopeAvatar:a,delayMs:s,...n}=e,l=p(g,a),[d,c]=r.useState(void 0===s);return r.useEffect(()=>{if(void 0!==s){let e=window.setTimeout(()=>c(!0),s);return()=>window.clearTimeout(e)}},[s]),d&&"loaded"!==l.imageLoadingStatus?(0,i.jsx)(o.sG.span,{...n,ref:t}):null});x.displayName=g;var b=v,y=f,w=x},6081:(e,t,a)=>{"use strict";a.d(t,{A:()=>l,q:()=>n});var r=a(2115),s=a(5155);function n(e,t){let a=r.createContext(t),n=e=>{let{children:t,...n}=e,l=r.useMemo(()=>n,Object.values(n));return(0,s.jsx)(a.Provider,{value:l,children:t})};return n.displayName=e+"Provider",[n,function(s){let n=r.useContext(a);if(n)return n;if(void 0!==t)return t;throw Error(`\`${s}\` must be used within \`${e}\``)}]}function l(e,t=[]){let a=[],n=()=>{let t=a.map(e=>r.createContext(e));return function(a){let s=a?.[e]||t;return r.useMemo(()=>({[`__scope${e}`]:{...a,[e]:s}}),[a,s])}};return n.scopeName=e,[function(t,n){let l=r.createContext(n),o=a.length;a=[...a,n];let i=t=>{let{scope:a,children:n,...i}=t,d=a?.[e]?.[o]||l,c=r.useMemo(()=>i,Object.values(i));return(0,s.jsx)(d.Provider,{value:c,children:n})};return i.displayName=t+"Provider",[i,function(a,s){let i=s?.[e]?.[o]||l,d=r.useContext(i);if(d)return d;if(void 0!==n)return n;throw Error(`\`${a}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=a.reduce((t,{useScope:a,scopeName:r})=>{let s=a(e)[`__scope${r}`];return{...t,...s}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return a.scopeName=t.scopeName,a}(n,...t)]}},6695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>i,Wu:()=>d,ZB:()=>o,Zp:()=>n,aR:()=>l,wL:()=>c});var r=a(5155);a(2115);var s=a(9434);function n(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function l(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function o(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...a})}function i(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",t),...a})}function d(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...a})}function c(e){let{className:t,...a}=e;return(0,r.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6 [.border-t]:pt-6",t),...a})}},8539:(e,t,a)=>{"use strict";a.d(t,{T:()=>l});var r=a(5155),s=a(2115),n=a(9434);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...s})});l.displayName="Textarea"},9033:(e,t,a)=>{"use strict";a.d(t,{c:()=>s});var r=a(2115);function s(e){let t=r.useRef(e);return r.useEffect(()=>{t.current=e}),r.useMemo(()=>(...e)=>t.current?.(...e),[])}},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var r=a(2596),s=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},9576:(e,t,a)=>{"use strict";a.d(t,{A:()=>d,AuthProvider:()=>i});var r=a(5155),s=a(2115),n=a(3464),l=a(5695);let o=(0,s.createContext)(void 0),i=e=>{let{children:t}=e,[a,i]=(0,s.useState)(null),[d,c]=(0,s.useState)(!0),[u,m]=(0,s.useState)(null),p=(0,l.useRouter)();(0,s.useEffect)(()=>{(()=>{let e=localStorage.getItem("user");e&&i(JSON.parse(e)),c(!1)})()},[]);let v=async(e,t)=>{try{c(!0),m(null);let a=(await n.A.post("https://blog-test-7we3.onrender.com/api/users/login",{email:e,password:t})).data;i(a),localStorage.setItem("user",JSON.stringify(a)),p.push("/dashboard")}catch(e){var a,r;m((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"Login failed")}finally{c(!1)}},h=async(e,t,a)=>{try{c(!0),m(null);let r=new FormData;r.append("email",e),r.append("password",t),a&&r.append("profileImage",a);let s=(await n.A.post("https://blog-test-7we3.onrender.com/api/users/register",r,{headers:{"Content-Type":"multipart/form-data"}})).data;i(s),localStorage.setItem("user",JSON.stringify(s)),p.push("/dashboard")}catch(e){var r,s;m((null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.message)||"Registration failed")}finally{c(!1)}};return(0,r.jsx)(o.Provider,{value:{user:a,loading:d,error:u,login:v,register:h,logout:()=>{i(null),localStorage.removeItem("user"),p.push("/login")}},children:t})},d=()=>{let e=(0,s.useContext)(o);if(console.log("context",e),void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9946:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var r=a(2115);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),l=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:d="",children:c,iconNode:u,...m}=e;return(0,r.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:a,strokeWidth:l?24*Number(n)/Number(s):n,className:o("lucide",d),...m},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(c)?c:[c]])}),c=(e,t)=>{let a=(0,r.forwardRef)((a,n)=>{let{className:i,...c}=a;return(0,r.createElement)(d,{ref:n,iconNode:t,className:o("lucide-".concat(s(l(e))),"lucide-".concat(e),i),...c})});return a.displayName=l(e),a}}},e=>{var t=t=>e(e.s=t);e.O(0,[797,794,517,441,684,358],()=>t(5015)),_N_E=e.O()}]);
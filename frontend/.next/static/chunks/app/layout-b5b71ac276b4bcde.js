(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},1232:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2093,23)),Promise.resolve().then(a.t.bind(a,7735,23)),Promise.resolve().then(a.t.bind(a,347,23)),Promise.resolve().then(a.bind(a,9576)),Promise.resolve().then(a.bind(a,1654))},1654:(e,t,a)=>{"use strict";a.d(t,{BlogProvider:()=>r,U:()=>d});var o=a(5155),l=a(2115),n=a(3464),s=a(9576);let i=(0,l.createContext)(void 0),r=e=>{let{children:t}=e,[a,r]=(0,l.useState)([]),[d,u]=(0,l.useState)(null),[c,p]=(0,l.useState)(!1),[v,m]=(0,l.useState)(null),{user:h}=(0,s.A)(),g=async()=>{try{p(!0),m(null);let e=await n.A.get("https://blog-test-7we3.onrender.com/api/blogs");r(e.data)}catch(a){var e,t;m((null===(t=a.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to fetch blogs")}finally{p(!1)}},y=async e=>{try{p(!0),m(null);let t=await n.A.get("https://blog-test-7we3.onrender.com/api/blogs/".concat(e));u(t.data)}catch(e){var t,a;m((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to fetch blog")}finally{p(!1)}},b=async(e,t,a)=>{try{p(!0),m(null);let o=new FormData;o.append("title",e),o.append("description",t),a&&o.append("image",a);let l={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(null==h?void 0:h.token)}};await n.A.post("https://blog-test-7we3.onrender.com/api/blogs",o,l),await g()}catch(e){var o,l;m((null===(l=e.response)||void 0===l?void 0:null===(o=l.data)||void 0===o?void 0:o.message)||"Failed to create blog")}finally{p(!1)}},f=async(e,t,a,o)=>{try{p(!0),m(null);let l=new FormData;l.append("title",t),l.append("description",a),o&&l.append("image",o);let s={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(null==h?void 0:h.token)}};await n.A.put("https://blog-test-7we3.onrender.com/api/blogs/".concat(e),l,s),await g(),d&&await y(e)}catch(e){var l,s;m((null===(s=e.response)||void 0===s?void 0:null===(l=s.data)||void 0===l?void 0:l.message)||"Failed to update blog")}finally{p(!1)}},w=async e=>{try{p(!0),m(null);let t={headers:{Authorization:"Bearer ".concat(null==h?void 0:h.token)}};await n.A.delete("https://blog-test-7we3.onrender.com/api/blogs/".concat(e),t),r(a.filter(t=>t._id!==e)),d&&d._id===e&&u(null)}catch(e){var t,o;m((null===(o=e.response)||void 0===o?void 0:null===(t=o.data)||void 0===t?void 0:t.message)||"Failed to delete blog")}finally{p(!1)}},_=async(e,t)=>{try{p(!0),m(null);let a={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==h?void 0:h.token)}},o=await n.A.post("https://blog-test-7we3.onrender.com/api/blogs/".concat(e,"/comments"),{content:t},a);u(o.data)}catch(e){var a,o;m((null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)||"Failed to add comment")}finally{p(!1)}},A=async(e,t,a)=>{try{p(!0),m(null);let o={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==h?void 0:h.token)}},l=await n.A.post("https://blog-test-7we3.onrender.com/api/blogs/".concat(e,"/comments/").concat(t,"/replies"),{content:a},o);u(l.data)}catch(e){var o,l;m((null===(l=e.response)||void 0===l?void 0:null===(o=l.data)||void 0===o?void 0:o.message)||"Failed to add reply")}finally{p(!1)}};return(0,o.jsx)(i.Provider,{value:{blogs:a,currentBlog:d,loading:c,error:v,fetchBlogs:g,fetchBlogById:y,createBlog:b,updateBlog:f,deleteBlog:w,addComment:_,addReply:A},children:t})},d=()=>{let e=(0,l.useContext)(i);if(void 0===e)throw Error("useBlog must be used within a BlogProvider");return e}},2093:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_4d318d",variable:"__variable_4d318d"}},7735:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_ea5f4b",variable:"__variable_ea5f4b"}},9576:(e,t,a)=>{"use strict";a.d(t,{A:()=>d,AuthProvider:()=>r});var o=a(5155),l=a(2115),n=a(3464),s=a(5695);let i=(0,l.createContext)(void 0),r=e=>{let{children:t}=e,[a,r]=(0,l.useState)(null),[d,u]=(0,l.useState)(!0),[c,p]=(0,l.useState)(null),v=(0,s.useRouter)();(0,l.useEffect)(()=>{(()=>{let e=localStorage.getItem("user");e&&r(JSON.parse(e)),u(!1)})()},[]);let m=async(e,t)=>{try{u(!0),p(null);let a=(await n.A.post("https://blog-test-7we3.onrender.com/api/users/login",{email:e,password:t})).data;r(a),localStorage.setItem("user",JSON.stringify(a)),v.push("/dashboard")}catch(e){var a,o;p((null===(o=e.response)||void 0===o?void 0:null===(a=o.data)||void 0===a?void 0:a.message)||"Login failed")}finally{u(!1)}},h=async(e,t,a)=>{try{u(!0),p(null);let o=new FormData;o.append("email",e),o.append("password",t),a&&o.append("profileImage",a);let l=(await n.A.post("https://blog-test-7we3.onrender.com/api/users/register",o,{headers:{"Content-Type":"multipart/form-data"}})).data;r(l),localStorage.setItem("user",JSON.stringify(l)),v.push("/dashboard")}catch(e){var o,l;p((null===(l=e.response)||void 0===l?void 0:null===(o=l.data)||void 0===o?void 0:o.message)||"Registration failed")}finally{u(!1)}};return(0,o.jsx)(i.Provider,{value:{user:a,loading:d,error:c,login:m,register:h,logout:()=>{r(null),localStorage.removeItem("user"),v.push("/login")}},children:t})},d=()=>{let e=(0,l.useContext)(i);if(console.log("context",e),void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[360,794,441,684,358],()=>t(1232)),_N_E=e.O()}]);